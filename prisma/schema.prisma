generator client {
  provider = "prisma-client"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "postgresql"
}

model Category {
  id          Int       @id @default(autoincrement())
  name        String    @unique
  description String?
  products    Product[]

  @@map("categories")
}

model Product {
  id          Int       @id @default(autoincrement())
  name        String
  description String?
  category    Category  @relation(fields: [categoryId], references: [id])
  categoryId  Int
  active      Boolean   @default(true)
  variants    Variant[]

  @@map("products")
}

model Variant {
  id         Int                @id @default(autoincrement())
  sku        String
  price      Float
  product    Product            @relation(fields: [productId], references: [id])
  productId  Int
  active     Boolean            @default(true)
  attributes VariantAttribute[]

  @@map("variants")
}

model VariantAttribute {
  id             Int     @id @default(autoincrement())
  attributeName  String
  attributeValue String
  variant        Variant @relation(fields: [variantId], references: [id], onDelete: Cascade)
  variantId      Int

  @@map("variant_attributes")
}

model User {
  id           Int     @id @default(autoincrement())
  username     String  @unique
  name         String
  lastname     String
  password     String
  refreshToken String?
  active       Boolean @default(true)

  @@map("users")
}
